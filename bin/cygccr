#!/bin/bash
#
# Cleans folders, copies new make info, to be run in cygwin 

set -Eeuo pipefail
set -x
set -u
set -o nounset

cd Pull_from_ends
rm -rf force.txt messages.cmo objects.cmo output.txt play properties.cmo report sim tension.txt
cd ..

cd Push_from_ends
rm -rf force.txt messages.cmo objects.cmo output.txt play properties.cmo report sim tension.txt
cd ..

cd tension_pull
rm -rf force.txt messages.cmo objects.cmo output.txt play properties.cmo report sim tension.txt
cd ..

make

echo "Folders cleaned!"

cp bin/report tension_pull/
cp bin/sim Pull_from_ends/
cp bin/sim Push_from_ends/
cp bin/sim tension_pull/

echo "New make files copied to each test folder"

